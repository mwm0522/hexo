<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[开发小程序必备小技能]]></title>
    <url>%2Fhexo%2F2019%2F10%2F11%2Fminprogram%2F</url>
    <content type="text"><![CDATA[前端生成小程序码 业务场景: 邀请用户; access_token是必须的参数，需要后台传给你。 js代码 12345678910111213141516171819202122232425Page(&#123; data:&#123;&#125;, onLoad:function(e)&#123;&#125;, onShow:function(e)&#123; // 假如后台已经把access_token传给你； var access_token = that.data.access_token; var userId = that.data.userId; wx.request(&#123; method: &quot;POST&quot;, responseType: &apos;arraybuffer&apos;, url: &apos;https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=&apos;+access_token, data:&#123; scene:&apos;000&apos;, path: &apos;pages/me/register/register?userId=&apos; + userId, width:430 &#125;, success:function(res)&#123; var src2 = wx.arrayBufferToBase64(res.data);获取到的数据需要转换成二维码图片 that.setData(&#123; src2:src2 &#125;) &#125; &#125;) &#125;,&#125;) 1&lt;image src=&apos;data:image/png;base64,&#123;&#123;src2&#125;&#125;&apos; mode=&quot;widthFix&quot;&gt;&lt;/image&gt; 小程序请求封装此处是封装的微信小程序请求方法 12345678910111213141516171819202122function commonAjax(url, types, data) &#123; url:api请求地址 types：请求类型 data：请求参数键值对 &#123;&#125; var app = getApp() var promise = new Promise(function (resolve, reject, defaults) &#123; wx.request(&#123; url: app.globalData.http_post_prefix + url, data: data, dataType: &quot;json&quot;, method: (types === 1) ? &apos;GET&apos; : &apos;POST&apos;, header: (types === 1) ? &#123; &apos;content-type&apos;: &apos;application/json&apos; &#125; : &#123; &apos;content-type&apos;: &apos;application/x-www-form-urlencoded&apos; &#125;, success: resolve, fail: reject, complete: defaults, &#125;) &#125;); return promise;&#125;module.exports = &#123; commonAjax:commonAjax&#125; 在其他页面的调用：封装方法放入until 1234567891011var untils = require(&apos;../../until/until&apos;)Page(&#123; data&#123;&#125; onLoad:function()&#123; let data=&#123;a:1,b:2&#125; untils.commonAjax(&apos;www.baidu.com&apos;,1,data) .then(function(res)&#123; //to do something &#125;) &#125;&#125;) 前端调小程序地图12345678910111213141516171819202122232425262728293031323334353637bindSelectAddresstap: function () &#123; //获取用户的授权 wx.authorize(&#123;scope: &apos;res&apos;&#125;) //获取用户当前定位地址 经纬度 wx.chooseLocation(&#123; success: res =&gt; &#123; this.setData(&#123; address: res.address, longitude: res.longitude, latitude: res.latitude &#125;) &#125;, //当用户拒绝授权再次点击时进入收授权页面再次授权。 fail: res =&gt; &#123; wx.showModal(&#123; title: &apos;温馨提示&apos;, content: &apos;您已拒绝授权，是否去设置打开？&apos;, confirmText: &quot;确认&quot;, cancelText: &quot;取消&quot;, success: res =&gt; &#123; if (res.confirm) &#123; wx.openSetting(&#123; success: (res) =&gt; &#123; console.log(res) res.authSetting = &#123; &quot;scope.userLocation&quot;: true, &#125; console.log(&quot;openSetting: success&quot;); &#125; &#125;); &#125; else &#123; &#125; &#125; &#125;) &#125; &#125;)&#125;, 数组去重封装促销信息重复的时候，根据促销信息的类型属性去重 1234567891011121314let arr = [ &#123;type:1,desc:&apos;购买此商品10个赠送2&apos;&#125;， &#123;type:1,desc:&apos;购买此商品5个赠送1&apos;&#125;, &#123;type:2,desc:&apos;购买此商品100元打8折&apos;&#125;， &#123;type:2,desc&apos;购买此商品50元打9折&apos;&#125;]let hash = &#123;&#125;;arr = arr.reduce(function (item, next) &#123;hash[next.type] ? &apos;&apos; : hash[next.type] = true &amp;&amp; item.push(next);return item&#125;, [])&#125;,` 数组值的去重 123456let arr = [1,2,3,33,55,44,1,44,55,33]function unique(arr) &#123; return Array.from(new Set(arr));&#125;unique(arr)获取到[1,2,3,33,44,55] 获取用户头像 昵称无须经过请求api，直接获取 12&lt;open-data type=&quot;userAvatarUrl&quot;&gt;&lt;/open-data&gt;&lt;open-data type=&quot;userNickName&quot; lang=&quot;zh_CN&quot;&gt;&lt;/open-data&gt;]]></content>
      <tags>
        <tag>小程序码、请求封装、微信小程序地图、数组去重 获取头像昵称</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[小程序页面滚动选型卡吸顶]]></title>
    <url>%2Fhexo%2F2019%2F10%2F09%2Fminiprogram%2F</url>
    <content type="text"><![CDATA[wxml默认布局he 1234567891011121314&lt;view class=&quot;container&quot;&gt;&lt;view class=&quot;banner&quot;&gt;&lt;/view&gt; &lt;view class=&quot;tab &#123;&#123;bannerH&lt;scrollTop?&apos;fixNav&apos;:&apos;&apos;&#125;&#125;&quot;&gt; &lt;block wx:for=&quot;&#123;&#123;tabs&#125;&#125;&quot; wx:key=&quot;key&quot;&gt; &lt;view bindtap=&quot;click&quot; data-index=&quot;&#123;&#123;index&#125;&#125;&quot; class=&quot;&#123;&#123;num==index?&apos;selected&apos;:&apos;&apos;&#125;&#125;&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/view&gt; &lt;/block&gt; &lt;/view&gt; &lt;view class=&quot;tab_content&quot;&gt; &lt;view wx:if=&quot;&#123;&#123;num==0&#125;&#125;&quot;&gt;宝贝&lt;/view&gt; &lt;view wx:if=&quot;&#123;&#123;num==1&#125;&#125;&quot;&gt;详情&lt;/view&gt; &lt;view wx:if=&quot;&#123;&#123;num==2&#125;&#125;&quot;&gt;评论&lt;/view&gt; &lt;view wx:if=&quot;&#123;&#123;num==3&#125;&#125;&quot;&gt;推荐商品&lt;/view&gt; &lt;/view&gt;&lt;/view&gt; js逻辑处理 分析: ①选项卡的制作。 ②页面的高度大于banner元素高度时候，tab元素内容应固定在页面顶部，反之回到原来位置。 12345678910111213141516171819202122232425262728Page(&#123; data:&#123; tab:[&#123;name:&apos;宝贝&apos;&#125;,&#123; name: &apos;详情&apos; &#125;,&#123; name: &apos;评论&apos; &#125;,&#123; name: &apos;推荐&apos; &#125;] num:0 &#125; onLoad:function(options)&#123; //获取banner元素高度 var that = this; const query = wx.createSelectorQuery(); query.select(&apos;.banner&apos;).boundingClientRect(); query.exec(function(rect)&#123; that.setData(&#123; bannerH:rect[0].height &#125;) &#125;) &#125;, click:function(e)&#123; this.setData(&#123; num: e.currentTarget.dataset.index &#125;) &#125; //获取页面滚动高度 onPageScroll:function(e)&#123; that.setData(&#123; scrollTop:e.scrollTop &#125;) &#125;&#125;) wxss布局 123456789101112.tab&#123; display:flex; justify-content:space-between; align-items:center;&#125;.fixNav&#123; position:fixed top:0, width:100%; z-index:9999; background-color:#fff;&#125;]]></content>
      <tags>
        <tag>小程序、吸顶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[flex 布局]]></title>
    <url>%2Fhexo%2F2019%2F08%2F21%2Fhello-world%2F</url>
    <content type="text"><![CDATA[布局是css的重点之一，提高代码的重用性，提高你的工作效率。 ~~概念:flex布局：英文全称Flexible Box,就是弹性布局的意思。采用Flex布局的元素，称为Flex容器（flex container），简称”容器”。它的所有子元素自动成为容器成员，称为Flex项目（flex item），简称”项目”。 一、作用在容器上的属性（我这里只列举我们工作中经常用到的。） 1、flex-direction：决定主轴的方向 ，值有 row row-reverse column column-reverse row:水平 正序排列 row-reverse:水平 倒序排列 column:纵向 正序排列 column-reverse:纵向 倒序排列 2、flex-warp：决定项目成员怎么换行。 nowrap wrap wrap-reverse nowrap：不换行 默认的 wrap：换行，第一行在上方。 wrap-reverse：换行，第一行在下方。 3、justify-content:决定了项目成员的对齐方式 flex-start | flex-end | center | space-between | space-around; 4、align-items:项目在交叉轴上如何对齐 flex-start | flex-end | center | baseline | stretch; 5、align-content:多根轴线的对齐方式。 align-content: flex-start | flex-end | center | space-between | space-around | stretch; 二、封装代码：命名一个class名字，放在一个公用文件夹，用的时候可以直接调用。 垂直居中： 123display: flex; justify-content: center; align-items: center; 水平居中： ``` display: flex; justify-content: center; ```~~]]></content>
  </entry>
</search>
